Array.prototype.remove=function(){for(var e,o,t=arguments,n=t.length;n&&this.length;)for(e=t[--n];-1!==(o=this.indexOf(e));)this.splice(o,1);return this},Number.prototype.format=function(){if(0==this)return 0;for(var e=/(^[+-]?\d+)(\d{3})/,o=this+"";e.test(o);)o=o.replace(e,"$1,$2");return o},String.prototype.format=function(){var e=parseFloat(this);return isNaN(e)?"0":e.format()},$(function(){$.fn.extend({dropdown:function(){let e=this.data("list");if(void 0===e&&(e=[]),"string"==typeof arguments[0]){const o=arguments[0];switch(o){case"select":this.find(".dropdown").html(e[arguments[1]]).end().find(".dropdown--item>span").html(e[arguments[1]]),this.data("selected",arguments[1]),this.trigger("change");break;case"selected":return this.data("selected");case"open":break;case"add_search":this.find(".dropdown--item").prepend('<input type="text" name="search" autocomplete="off" placeholder="'+__("검색어를 입력해주세요.")+'">');const t=this.find(".dropdown--item").find(">ul").find(">li");this.find("[name=search]").on("keyup",function(){const e=$(this).val();t.each(function(){const o=$(this).text();o.search(new RegExp(e,"i"))>-1?$(this).show():$(this).hide()})});break;case"add":if("string"==typeof arguments[1]){const o=$("<li>");e[arguments[1]]=arguments[1];const t=$("<button>").attr("type","button").text(arguments[1]);t.appendTo(o),this.find(".dropdown--item").find(">ul").append(o)}else if("object"==typeof arguments[1]){e[arguments[1].value]=arguments[1].text;const o=$("<li>"),t=$("<button>").attr("type","button").val(arguments[1].value).html(arguments[1].text);t.appendTo(o),o.data("value",arguments[1].value),o.appendTo(this.find(".dropdown--item").find(">ul"))}}}else"object"==typeof arguments[0]&&1===arguments.length&&this.data("options",arguments[0]);return this.data("list",e),this},tab:function(){if("string"==typeof arguments[0]){const e=arguments[0];e}"object"==typeof arguments[0]&&1===arguments.length&&this.data("options",arguments[0])}});let e,o=[];$.alert=(e=>{alert(e)}),$(".navigation--back").click(()=>{if(window.location.href.indexOf("exchange.html")<0)return window.history.back(),!1}),$(".navigation").click(()=>{$(".mobile-panel").show()}),$.fn.myModal=function(t){const n=$(this);if(window.myModal_stop_event=!1,n.hasClass("modal")){switch(t){case"show":n.trigger("beforeOpen",[e]),window.myModal_stop_event?window.myModal_stop_event=!1:(o=o.filter(e=>e!==n),o.push(n),n.addClass("modal--open"),n.trigger("open"));break;case"hide":n.trigger("beforeClose"),window.myModal_stop_event?stop_event=!1:(o.remove(n),n.removeClass("modal--open"),n.trigger("close"));break;case"toggle":n.hasClass("modal--open")?n.myModal("hide"):n.myModal("show");break;case"beforeOpen":n.on("beforeOpen",arguments[1]);break;case"beforeClose":n.on("beforeClose",arguments[1]);break;case"stopEvent":window.myModal_stop_event=!0}return this}},$(".nav--side .language").dropdown("add",{value:"ko",text:"한국어"}),$(".tabs").on("click","li",e=>{const o=$(e.target).closest("li"),t=o.closest(".tabs"),n=o.index(),a=o.data("target");t.trigger("beforeShow",[n,a]),t.find(".tab--active").removeClass("tab--active"),o.addClass("tab--active"),t.closest(".tab-wrapper").find(".tab-content").hide(),$(a).show(),t.trigger("show",[n,a])}),$(document).on("click","[data-toggle=modal]",o=>{const t=$(o.target),n=t.attr("data-target");return e=t,$(n).myModal("toggle"),!1}),$(document).on("click",".accordion .accordion--header",e=>{const o=$(e.target),t=o.closest(".accordion");e.preventDefault(),o.closest(".accordion--item").hasClass("accordion--open")?o.closest(".accordion--item").removeClass("accordion--open"):(t.find(".accordion--item.accordion--open").removeClass("accordion--open"),o.closest(".accordion--item").toggleClass("accordion--open"))}),$(window).on("keyup",t=>{"Escape"===t.key&&o.length&&($(o.pop()).removeClass("modal--open"),e.focus())}),$(document).on("click",":not(.dropdown)",e=>{$(e.target).closest(".dropdown-wrapper").length?$(e.target).closest(".dropdown--wrapper").find(".dropdown--open").toggleClass("dropdown--open"):$(e.target).closest(".dropdown").hasClass("dropdown--item")||$(".dropdown--open").removeClass("dropdown--open")}),$(document).on("click",":not(.tab_header .dropdown--wrapper .dropdown)",e=>{$(e.target).closest(".dropdown-wrapper").length?$(e.target).closest(".dropdown--wrapper").find(".dropdown--open").toggleClass("dropdown--open"):$(e.target).closest(".dropdown").hasClass("dropdown--item")||($(".dropdown--open").removeClass("dropdown--open"),$(".background").removeClass("active"))}),$(document).on("click",".tab_header .dropdown--wrapper .dropdown",e=>{e.stopPropagation(),$(".dropdown--open").removeClass("dropdown--open"),$(".background").toggleClass("active"),$(e.target).toggleClass("dropdown--open"),$(e.target).parent().find("[name=search]").focus()}),$(document).on("click",".dropdown",e=>{e.stopPropagation(),$(".dropdown--open").removeClass("dropdown--open"),$(e.target).toggleClass("dropdown--open"),$(e.target).parent().find("[name=search]").focus()}),$(document).on("click",".dropdown-wrapper .dropdown--item > ul > li",e=>{const o=$(e.target).closest("li"),t=$(e.target).text(),n=o.data("value"),a=$(e.target).closest(".dropdown-wrapper");a.dropdown("select",n),a.data("selected",n),a.find(".dropdown--selected").removeClass("dropdown--selected"),a.find(".dropdown").removeClass("dropdown--open"),$(e.target).closest("li").addClass("dropdown--selected"),$(e.target).closest(".dropdown--item").find(">span").text(t),a.trigger("change",[n])}),$(".language").on("change",(e,o)=>{window.localStorage.locale!=o&&API.setLanguage(o,e=>{e.success?(window.localStorage.locale=o,window._c(o),location.reload()):alert(e.error.message)})}),$("input[type=number]").on("keypress",e=>{const o=$(e.target),t=parseInt(o.attr("maxlength"),10);t>0&&o.val().length>=t&&(window.getSelection().toString()||e.preventDefault())}),$(".input--spiner .spiner-plus").click(e=>{const o=$(e.target).closest(".input--spiner").find("input");let t=Math.max(Number(o.val())+1,1);o.val()>=o.attr("max")&&(t=o.attr("max")),o.val(t).trigger("input")}),$(".input--spiner .spiner-minus").click(e=>{const o=$(e.target).closest(".input--spiner").find("input");let t=Math.max(Number(o.val())-1,1);o.val(t).trigger("input")}),$(".grid--code").on("input","input[type=number]",e=>{e.target.value&&$(e.target).next().length&&$(e.target).next().focus()}),$(".grid--code").on("keypress","input[type=number]",e=>{}),$(".details").on("click",".btn--buy",()=>{$("#modal-buy").addClass("modal--open")}),$(".details").on("click",".btn--sell",()=>{$("#modal-sell").addClass("modal--open")}),$(".modal").on("click",e=>{const o=$(e.target).closest(".modal"),t=$(e.target);o.get(0)!=t.get(0)?t.hasClass("btn--close")&&o.myModal("hide"):t.myModal("hide")}),$(".btn--logout").click(()=>{API.logout(e=>{e.success?location.reload():alert(e.error.message)})})});